# ====== Copier 配置 ======
# 模板子目录（分离模板元数据和模板代码）
_subdirectory: template

# 模板后缀（空字符串表示所有文件都被处理）
_templates_suffix: ""

# 最低 Copier 版本要求
_min_copier_version: "9.0.0"

# 排除的文件/目录模式
_exclude:
  - "*.pyc"
  - "__pycache__"
  - "*.pyo"
  - "*.pyd"
  - ".Python"
  - "*.so"
  - "*.egg"
  - "*.egg-info"
  - "dist"
  - "build"
  - ".DS_Store"
  - ".svn"
  - ".hg"
  - ".git"
  - ".tox"
  - ".coverage"
  - ".cache"
  - ".nosetests"
  - ".mypy_cache"
  - ".pytest_cache"
  - ".ruff_cache"
  - "copier.yml"

# 如果已存在则跳过的文件
_skip_if_exists:
  - .env
  - .secrets.yaml

# ====== 项目信息 ======
project_name:
  type: str
  default: "My Project"
  help: 项目名称（可包含空格）

project_slug:
  type: str
  default: "{{ project_name|lower|replace(' ', '-')|replace('_', '-') }}"
  help: 项目 slug（用于目录名）

package_name:
  type: str
  default: "{{ project_slug.replace('-', '_') }}"
  help: Python 包名

# ====== 作者信息 ======
author_name:
  type: str
  default: "Your Name"
  help: 作者名称

author_email:
  type: str
  default: "your.email@example.com"
  help: 作者邮箱

# ====== 项目描述 ======
description:
  type: str
  default: "A short description of your project"
  help: 项目描述

# ====== 版本配置 ======
version:
  type: str
  default: "0.1.0"
  help: 初始版本号

python_version:
  type: str
  default: "3.13"
  help: Python 版本要求
  choices:
    - "3.11"
    - "3.12"
    - "3.13"

# ====== 许可证 ======
license:
  type: str
  default: "MIT"
  help: 开源协议
  choices:
    - MIT
    - BSD-3-Clause
    - ISC
    - Apache-2.0
    - GPL-3.0
    - Not open source

# ====== 仓库配置 ======
repository_provider:
  type: str
  default: "https://github.com"
  help: 仓库提供商 URL

repository_username:
  type: str
  default: "{{ author_name|lower|replace(' ', '-') }}"
  help: 仓库用户名

# ====== 功能选项 ======
add_api:
  type: bool
  default: true
  help: 是否添加 FastAPI 示例

add_cli:
  type: bool
  default: false
  help: 是否添加 CLI 示例

# ====== 代码规范 ======
line_length:
  type: int
  default: 88
  help: 代码行长度限制

# ====== 版权信息 ======
copyright_date:
  type: str
  default: "{{ now().year }}"
  help: 版权年份

# ====== 生成后消息 ======
_message_after_copy: |
  {{ "\n" }}============================================================
  项目 "{{ project_name }}" 创建成功！
  ============================================================{% %}

  下一步：

  1. 进入项目目录：
     $ cd {{ _copier_conf.dst_path }}

  2. 创建虚拟环境：
     $ uv venv
     $ source .venv/bin/activate  # Windows: .venv\Scripts\activate

  3. 安装依赖：
     $ uv pip install -e ".[dev]"

  4. 安装 pre-commit 钩子：
     $ pre-commit install

  5. 运行代码检查：
     $ python scripts/check.py

  6. 运行测试：
     $ pytest

  {% if add_api -%}
  7. 启动 FastAPI 服务器（可选）：
     $ python -m {{ package_name }}.api
  {% endif -%}

  ============================================================